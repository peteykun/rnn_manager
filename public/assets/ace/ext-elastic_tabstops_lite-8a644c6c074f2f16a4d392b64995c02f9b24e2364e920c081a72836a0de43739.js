define("ace/ext/elastic_tabstops_lite",["require","exports","module","ace/editor","ace/config"],function(e,t){"use strict";var i=function(e){this.$editor=e;var t=this,i=[],n=!1;this.onAfterExec=function(){n=!1,t.processRows(i),i=[]},this.onExec=function(){n=!0},this.onChange=function(e){n&&(-1==i.indexOf(e.start.row)&&i.push(e.start.row),e.end.row!=e.start.row&&i.push(e.end.row))}};(function(){this.processRows=function(e){this.$inChange=!0;for(var t=[],i=0,n=e.length;n>i;i++){var s=e[i];if(!(t.indexOf(s)>-1))for(var o=this.$findCellWidthsForBlock(s),r=this.$setBlockCellWidthsToMax(o.cellWidths),a=o.firstRow,l=0,h=r.length;h>l;l++){var c=r[l];t.push(a),this.$adjustRow(a,c),a++}}this.$inChange=!1},this.$findCellWidthsForBlock=function(e){for(var t,i=[],n=e;n>=0&&(t=this.$cellWidthsForRow(n),0!=t.length);)i.unshift(t),n--;var s=n+1;n=e;for(var o=this.$editor.session.getLength();o-1>n&&(n++,t=this.$cellWidthsForRow(n),0!=t.length);)i.push(t);return{cellWidths:i,firstRow:s}},this.$cellWidthsForRow=function(e){for(var t=this.$selectionColumnsForRow(e),i=[-1].concat(this.$tabsForRow(e)),n=i.map(function(){return 0}).slice(1),s=this.$editor.session.getLine(e),o=0,r=i.length-1;r>o;o++){var a=i[o]+1,l=i[o+1],h=this.$rightmostSelectionInCell(t,l),c=s.substring(a,l);n[o]=Math.max(c.replace(/\s+$/g,"").length,h-a)}return n},this.$selectionColumnsForRow=function(e){var t=[],i=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&e==i.row&&t.push(i.column),t},this.$setBlockCellWidthsToMax=function(e){for(var t,i,n,s=!0,o=this.$izip_longest(e),r=0,a=o.length;a>r;r++){var l=o[r];if(l.push){l.push(NaN);for(var h=0,c=l.length;c>h;h++){var u=l[h];if(s&&(t=h,n=0,s=!1),isNaN(u)){i=h;for(var d=t;i>d;d++)e[d][r]=n;s=!0}n=Math.max(n,u)}}else console.error(l)}return e},this.$rightmostSelectionInCell=function(e,t){var i=0;if(e.length){for(var n=[],s=0,o=e.length;o>s;s++)e[s]<=t?n.push(s):n.push(0);i=Math.max.apply(Math,n)}return i},this.$tabsForRow=function(e){for(var t,i=[],n=this.$editor.session.getLine(e),s=/\t/g;null!=(t=s.exec(n));)i.push(t.index);return i},this.$adjustRow=function(e,t){var i=this.$tabsForRow(e);if(0!=i.length)for(var n=0,s=-1,o=this.$izip(t,i),r=0,a=o.length;a>r;r++){var l=o[r][0],h=o[r][1];s+=1+l,h+=n;var c=s-h;if(0!=c){var u=this.$editor.session.getLine(e).substr(0,h),d=u.replace(/\s*$/g,""),g=u.length-d.length;c>0&&(this.$editor.session.getDocument().insertInLine({row:e,column:h+1},Array(c+1).join(" ")+"	"),this.$editor.session.getDocument().removeInLine(e,h,h+1),n+=c),0>c&&g>=-c&&(this.$editor.session.getDocument().removeInLine(e,h+c,h),n+=c)}}},this.$izip_longest=function(e){if(!e[0])return[];for(var t=e[0].length,i=e.length,n=1;i>n;n++){var s=e[n].length;s>t&&(t=s)}for(var o=[],r=0;t>r;r++){for(var a=[],n=0;i>n;n++)""===e[n][r]?a.push(NaN):a.push(e[n][r]);o.push(a)}return o},this.$izip=function(e,t){for(var i=e.length>=t.length?t.length:e.length,n=[],s=0;i>s;s++){var o=[e[s],t[s]];n.push(o)}return n}}).call(i.prototype),t.ElasticTabstopsLite=i;var n=e("../editor").Editor;e("../config").defineOptions(n.prototype,"editor",{useElasticTabstops:{set:function(e){e?(this.elasticTabstops||(this.elasticTabstops=new i(this)),this.commands.on("afterExec",this.elasticTabstops.onAfterExec),this.commands.on("exec",this.elasticTabstops.onExec),this.on("change",this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec),this.commands.removeListener("exec",this.elasticTabstops.onExec),this.removeListener("change",this.elasticTabstops.onChange))}}})}),function(){window.require(["ace/ext/elastic_tabstops_lite"],function(){})}();